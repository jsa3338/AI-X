import tkinter as tk
import random

# í”Œë ˆì´ì–´ ì •ë³´
player = {
    "ì´ë¦„": "ìš©ì‚¬",
    "ì²´ë ¥": 100,
    "ê³µê²©ë ¥": 20,
    "íšŒë³µì•½": 3,
    "ë ˆë²¨": 1,
    "ê²½í—˜ì¹˜": 0
}

# ëª¬ìŠ¤í„° ìƒì„± í•¨ìˆ˜
def spawn_monster():
    return {
        "ì´ë¦„": random.choice(["ê³ ë¸”ë¦°", "ìŠ¬ë¼ì„", "í•´ê³¨ ì „ì‚¬"]),
        "ì²´ë ¥": random.randint(30, 60),
        "ê³µê²©ë ¥": random.randint(5, 15)
    }

# ëª¬ìŠ¤í„° ì´ˆê¸°í™”
monster = spawn_monster()

# ê³µê²© ë²„íŠ¼ ë™ì‘
def attack():
    global monster
    damage = random.randint(10, player["ê³µê²©ë ¥"])
    monster["ì²´ë ¥"] -= damage
    log(f"{monster['ì´ë¦„']}ì—ê²Œ {damage}ì˜ í”¼í•´ë¥¼ ì…í˜!")

    if monster["ì²´ë ¥"] > 0:
        monster_attack()
    else:
        log(f"{monster['ì´ë¦„']}ì„(ë¥¼) ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤!")
        exp = random.randint(10, 25)
        player["ê²½í—˜ì¹˜"] += exp
        log(f"ê²½í—˜ì¹˜ {exp} íšë“!")
        if player["ê²½í—˜ì¹˜"] >= 50:
            player["ë ˆë²¨"] += 1
            player["ê³µê²©ë ¥"] += 5
            player["ì²´ë ¥"] = 100
            player["ê²½í—˜ì¹˜"] = 0
            log(f"ë ˆë²¨ì—…! í˜„ì¬ ë ˆë²¨: {player['ë ˆë²¨']}")
        monster = spawn_monster()
        log(f"{monster['ì´ë¦„']}ì´(ê°€) ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤!")
    update_status()

# íšŒë³µ ë²„íŠ¼ ë™ì‘
def heal():
    if player["íšŒë³µì•½"] > 0:
        player["ì²´ë ¥"] += 30
        player["íšŒë³µì•½"] -= 1
        log("ì²´ë ¥ì„ 30 íšŒë³µí–ˆìŠµë‹ˆë‹¤!")
    else:
        log("íšŒë³µì•½ì´ ì—†ìŠµë‹ˆë‹¤!")
    monster_attack()
    update_status()

# ë„ë§ ë²„íŠ¼ ë™ì‘
def run():
    global monster
    log("ë„ë§ì³¤ìŠµë‹ˆë‹¤!")
    monster = spawn_monster()
    log(f"{monster['ì´ë¦„']}ì´(ê°€) ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤!")
    update_status()

# ëª¬ìŠ¤í„° ë°˜ê²©
def monster_attack():
    damage = random.randint(5, monster["ê³µê²©ë ¥"])
    player["ì²´ë ¥"] -= damage
    log(f"{monster['ì´ë¦„']}ì˜ ê³µê²©! {damage} í”¼í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤.")
    if player["ì²´ë ¥"] <= 0:
        log("ê²Œì„ ì˜¤ë²„! ë‹¹ì‹ ì€ ì“°ëŸ¬ì¡ŒìŠµë‹ˆë‹¤.")
        disable_buttons()

# ë¡œê·¸ ì¶œë ¥
def log(message):
    text_log.insert(tk.END, message + "\n")
    text_log.see(tk.END)

# ìƒíƒœ ì—…ë°ì´íŠ¸
def update_status():
    lbl_status.config(text=f"ğŸ‘¤ {player['ì´ë¦„']} | ì²´ë ¥: {player['ì²´ë ¥']} | ë ˆë²¨: {player['ë ˆë²¨']} | íšŒë³µì•½: {player['íšŒë³µì•½']}\n"
                           f"ğŸ‘¾ {monster['ì´ë¦„']} | ì²´ë ¥: {monster['ì²´ë ¥']}")
    
# ë²„íŠ¼ ë¹„í™œì„±í™”
def disable_buttons():
    btn_attack.config(state=tk.DISABLED)
    btn_heal.config(state=tk.DISABLED)
    btn_run.config(state=tk.DISABLED)

# GUI ë§Œë“¤ê¸°
window = tk.Tk()
window.title("íŒŒì´ì¬ RPG ê²Œì„")
window.geometry("400x500")

lbl_status = tk.Label(window, text="", justify="left")
lbl_status.pack(pady=10)

btn_attack = tk.Button(window, text="âš”ï¸ ê³µê²©", command=attack, width=20)
btn_attack.pack(pady=5)

btn_heal = tk.Button(window, text="ğŸ§ª íšŒë³µ", command=heal, width=20)
btn_heal.pack(pady=5)

btn_run = tk.Button(window, text="ğŸƒ ë„ë§", command=run, width=20)
btn_run.pack(pady=5)

text_log = tk.Text(window, height=20)
text_log.pack(pady=10)

log(f"{monster['ì´ë¦„']}ì´(ê°€) ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤!")
update_status()

window.mainloop()
